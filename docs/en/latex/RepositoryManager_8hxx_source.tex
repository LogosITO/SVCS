\doxysection{Repository\+Manager.\+hxx}
\hypertarget{RepositoryManager_8hxx_source}{}\label{RepositoryManager_8hxx_source}\index{core/include/RepositoryManager.hxx@{core/include/RepositoryManager.hxx}}
\mbox{\hyperlink{RepositoryManager_8hxx}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ISubject_8hxx}{../../services/ISubject.hxx}}"{}}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ <optional>}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ <filesystem>}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00044\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacesvcs_1_1core}{svcs::core}}\ \{}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \textcolor{keyword}{using\ namespace\ }\mbox{\hyperlink{namespacesvcs_1_1services}{svcs::services}};}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00057\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structsvcs_1_1core_1_1CommitInfo}{CommitInfo}}\ \{}
\DoxyCodeLine{00065\ \ \ \ \ std::string\ \mbox{\hyperlink{structsvcs_1_1core_1_1CommitInfo_a22c8de2ed22d1a26c86a75e7081f064e}{hash}};}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00074\ \ \ \ \ std::string\ \mbox{\hyperlink{structsvcs_1_1core_1_1CommitInfo_a12ac23b4fb675f21f59f2f90a810c88a}{message}};}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structsvcs_1_1core_1_1CommitInfo_a2be554aecf325f18a1625623370d559a}{files\_count}}\ =\ 0;}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00092\ \ \ \ \ std::string\ \mbox{\hyperlink{structsvcs_1_1core_1_1CommitInfo_a70e66fd024ae0753086976570f9d37ac}{author}};}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00101\ \ \ \ \ std::string\ \mbox{\hyperlink{structsvcs_1_1core_1_1CommitInfo_aa09cc28f2e82ed826ca7d14fd1ed8a26}{timestamp}};}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00110\ \ \ \ \ std::string\ \mbox{\hyperlink{structsvcs_1_1core_1_1CommitInfo_a13bf52279934fb69911f27829496a468}{branch}};}
\DoxyCodeLine{00111\ \};}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00128\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager}{RepositoryManager}}\ \{}
\DoxyCodeLine{00129\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00137\ \ \ \ \ std::string\ currentRepoPath;}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00146\ \ \ \ \ std::shared\_ptr<ISubject>\ eventBus;}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00148\ \ \ \ \ \textcolor{comment}{//\ -\/-\/-\/\ Private\ Utility\ Methods\ for\ Logging\ /\ Приватные\ служебные\ методы\ для\ логирования\ -\/-\/-\/}}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00159\ \ \ \ \ \textcolor{keywordtype}{void}\ logError(\textcolor{keyword}{const}\ std::string\&\ message)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{keywordtype}{void}\ logDebug(\textcolor{keyword}{const}\ std::string\&\ message)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{keywordtype}{void}\ logInfo(\textcolor{keyword}{const}\ std::string\&\ message)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ \ \ \ \ \textcolor{comment}{//\ -\/-\/-\/\ Private\ Utility\ Methods\ for\ File\ System\ Operations\ /\ Приватные\ служебные\ методы\ для\ операций\ с\ файловой\ системой\ -\/-\/-\/}}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00196\ \ \ \ \ \textcolor{keywordtype}{bool}\ createDirectory(\textcolor{keyword}{const}\ std::filesystem::path\&\ path)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00211\ \ \ \ \ \textcolor{keywordtype}{bool}\ createFile(\textcolor{keyword}{const}\ std::filesystem::path\&\ path,\ \textcolor{keyword}{const}\ std::string\&\ content\ =\ \textcolor{stringliteral}{"{}"{}})\ \textcolor{keyword}{const};}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00222\ \ \ \ \ std::string\ getCurrentBranchFromHead()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00223\ }
\DoxyCodeLine{00224\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00234\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_a94770300269bc08cd10f32991ce501d2}{RepositoryManager}}(std::shared\_ptr<ISubject>\ bus);}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00245\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_ac0d42424f59a33af3f2964c7eddcd192}{updateHead}}(\textcolor{keyword}{const}\ std::string\&\ commit\_hash)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00246\ }
\DoxyCodeLine{00262\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_ad003b3bfb496804283a939224a78c566}{initializeRepository}}(\textcolor{keyword}{const}\ std::string\&\ path,\ \textcolor{keywordtype}{bool}\ force\ =\ \textcolor{keyword}{false});}
\DoxyCodeLine{00263\ }
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_a529c5a70cc13ab92989e55f7db9f7882}{isRepositoryInitialized}}(\textcolor{keyword}{const}\ std::string\&\ path\ =\ \textcolor{stringliteral}{"{}."{}});}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00288\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_a0938228acbd111de2b8a6c230d61fdf2}{updateBranchReference}}(\textcolor{keyword}{const}\ std::string\&\ branchName,\ \textcolor{keyword}{const}\ std::string\&\ commitHash)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00289\ }
\DoxyCodeLine{00299\ \ \ \ \ [[nodiscard]]\ std::filesystem::path\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_a27171d33fc901388a54e811d892458ba}{getRepositoryPath}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00300\ }
\DoxyCodeLine{00301\ \ \ \ \ \textcolor{comment}{//\ -\/-\/-\/\ Staging\ and\ History\ Management\ Methods\ /\ Методы\ управления\ подготовкой\ и\ историей\ -\/-\/-\/}}
\DoxyCodeLine{00302\ }
\DoxyCodeLine{00316\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_acdb90f4f22c89514d2429730b5a3623d}{addFileToStaging}}(\textcolor{keyword}{const}\ std::string\&\ filePath);}
\DoxyCodeLine{00317\ }
\DoxyCodeLine{00327\ \ \ \ \ std::string\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_a0036b6bb88ccb15b43e4bebfa073c823}{getHeadCommit}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00328\ }
\DoxyCodeLine{00340\ \ \ \ \ std::string\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_a65705c1b91ea0c8878446856ced2ea59}{createCommit}}(\textcolor{keyword}{const}\ std::string\&\ message);}
\DoxyCodeLine{00341\ }
\DoxyCodeLine{00353\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_a34e211523257152d66477f6e9fa5d6ab}{updateCommitReferences}}(\textcolor{keyword}{const}\ std::string\&\ removedCommitHash,\ \textcolor{keyword}{const}\ std::string\&\ newParentHash)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00354\ }
\DoxyCodeLine{00368\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_ae159d5e092b0e945c17ba74e5f5af61e}{revertCommit}}(\textcolor{keyword}{const}\ std::string\&\ commit\_hash);}
\DoxyCodeLine{00369\ }
\DoxyCodeLine{00381\ \ \ \ \ std::optional<CommitInfo>\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_ae0706f73124ce12640a1a21fa3309398}{getCommitByHash}}(\textcolor{keyword}{const}\ std::string\&\ commit\_hash)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00382\ }
\DoxyCodeLine{00394\ \ \ \ \ std::string\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_a1f8b1488fb9d9b1343b35abcc0184464}{getParentCommitHash}}(\textcolor{keyword}{const}\ std::string\&\ commit\_hash)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00395\ }
\DoxyCodeLine{00407\ \ \ \ \ \textcolor{keyword}{static}\ std::string\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_ac7de58f0405dc440d4de884fd2782e64}{generateCommitHash}}(\textcolor{keyword}{const}\ std::string\&\ content);}
\DoxyCodeLine{00408\ }
\DoxyCodeLine{00420\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_a543e43dc2b2ebd12605824064ee4cd8b}{restoreFilesFromCommit}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structsvcs_1_1core_1_1CommitInfo}{CommitInfo}}\&\ commit)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00421\ }
\DoxyCodeLine{00431\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_aa1b198ef75b6c571dfd4ace68ecc0f89}{clearStagingArea}}();}
\DoxyCodeLine{00432\ }
\DoxyCodeLine{00444\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_a303ff113df6c3fd0dbe0df7e98cfbc29}{saveStagedChanges}}(\textcolor{keyword}{const}\ std::string\&\ message);}
\DoxyCodeLine{00445\ }
\DoxyCodeLine{00455\ \ \ \ \ std::vector<std::string>\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_a002f7a416459e5c17de748fd527a67bc}{getStagedFiles}}();}
\DoxyCodeLine{00456\ }
\DoxyCodeLine{00466\ \ \ \ \ std::vector<CommitInfo>\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_a3c522df200bd216339feaac08ad45c03}{getCommitHistory}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00467\ }
\DoxyCodeLine{00479\ \ \ \ \ std::vector<CommitInfo>\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_ae6c18516f1a61af3cdd8b978b5989fe3}{getBranchHistory}}(\textcolor{keyword}{const}\ std::string\&\ branch\_name)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00480\ }
\DoxyCodeLine{00490\ \ \ \ \ std::string\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_a1a4b3f81b30778c851f0db4accf5f2d8}{getCurrentBranch}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00491\ }
\DoxyCodeLine{00503\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_adba9e0953fb91a855f593be9de1408e9}{removeRepository}}(\textcolor{keyword}{const}\ std::filesystem::path\&\ path)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00504\ }
\DoxyCodeLine{00516\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_ad84b0f67d4e6e2e60082497b4e1899a3}{branchExists}}(\textcolor{keyword}{const}\ std::string\&\ branch\_name)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00517\ }
\DoxyCodeLine{00529\ \ \ \ \ std::string\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_a2562058c0a617d0ded24030dc8682251}{getBranchHead}}(\textcolor{keyword}{const}\ std::string\&\ branch\_name)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00530\ }
\DoxyCodeLine{00544\ \ \ \ \ std::string\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_ae565a1db180819ff2e0840ed601beadc}{getFileContentAtCommit}}(\textcolor{keyword}{const}\ std::string\&\ commit\_hash,\ \textcolor{keyword}{const}\ std::string\&\ file\_path)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00545\ }
\DoxyCodeLine{00557\ \ \ \ \ std::vector<std::string>\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_aa45d786e39da7deb33648147efbcd739}{getCommitFiles}}(\textcolor{keyword}{const}\ std::string\&\ commit\_hash)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00558\ }
\DoxyCodeLine{00570\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_a2c18c663d76a842f4999df20b17e4687}{setMergeState}}(\textcolor{keyword}{const}\ std::string\&\ branch\_name,\ \textcolor{keyword}{const}\ std::string\&\ commit\_hash)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00571\ }
\DoxyCodeLine{00579\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_a83533e5ffa7ea687981e4611e1e4a9ac}{clearMergeState}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00580\ }
\DoxyCodeLine{00590\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_a45a6a691304ae0c2cad9fe10bfbca607}{isMergeInProgress}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00591\ }
\DoxyCodeLine{00601\ \ \ \ \ std::string\ \mbox{\hyperlink{classsvcs_1_1core_1_1RepositoryManager_a7c790d31b20b710b6512c0703030fe7a}{getMergeBranch}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00602\ \};}
\DoxyCodeLine{00603\ }
\DoxyCodeLine{00604\ \}}

\end{DoxyCode}
