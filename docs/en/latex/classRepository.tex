\doxysection{Repository Class Reference}
\hypertarget{classRepository}{}\label{classRepository}\index{Repository@{Repository}}


Manages the version control directory structure and core operations.  




{\ttfamily \#include $<$Repository.\+hxx$>$}

Inheritance diagram for Repository\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classRepository}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classRepository_a64de863b90dcce47cad8389326d5d0f7}{\texorpdfstring{$\sim$}{\string~}\+Repository}} () override
\begin{DoxyCompactList}\small\item\em Virtual destructor. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classRepository_a1df4810f68ebca61adfbbad3e079b2f1}{Repository}} (std\+::filesystem\+::path rpath)
\begin{DoxyCompactList}\small\item\em Constructs the repository manager. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classRepository_a58a23eff67b9a24c3a8916fd8dfacc9a}{initialize\+Dependencies}} ()
\begin{DoxyCompactList}\small\item\em Initializes the repository\textquotesingle{}s internal dependencies. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classRepository_aff14558f8e382efc3e5e53263b85e312}{init}} ()
\begin{DoxyCompactList}\small\item\em Initializes the basic repository structure (.svcs, objects, refs) on the disk. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classRepository_ae29372147e4b9dbb7ad3efdd32c1c42e}{is\+\_\+initialized}} () const
\begin{DoxyCompactList}\small\item\em Checks if the repository structure is fully initialized and valid. \end{DoxyCompactList}\item 
const std\+::filesystem\+::path \& \mbox{\hyperlink{classRepository_a74b5a052c07a886d428e42aaaeebeeb5}{get\+Path}} () const
\begin{DoxyCompactList}\small\item\em Gets the root path of the repository. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classObjectStorage}{Object\+Storage}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{classRepository_a9c1153091e3ffa2d5aaf65e900a41c40}{get\+Object\+Storage}} () const
\begin{DoxyCompactList}\small\item\em Gets the raw pointer to the managed \doxylink{classObjectStorage}{Object\+Storage} instance for database interaction. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classRepository_a250a9e24514ca3a4f8c6d954ad4dcefc}{attach}} (std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classIObserver}{IObserver}} $>$ observer) override
\begin{DoxyCompactList}\small\item\em Attaches an observer to receive events. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classRepository_a1e421ee99132cf3dcaac6fc54ba0ab7d}{detach}} (std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classIObserver}{IObserver}} $>$ observer) override
\begin{DoxyCompactList}\small\item\em Detaches a registered observer. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classRepository_a7ce8792d0a1493d98986fb2732b95c4c}{notify}} (const \mbox{\hyperlink{structEvent}{Event}} \&event) const override
\begin{DoxyCompactList}\small\item\em Notifies all attached observers about an event. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classRepository_ae75a20286b79919005724ab4dfa80717}{stage\+File}} (const std\+::string \&path)
\begin{DoxyCompactList}\small\item\em Stages a file by hashing its content, storing it in the object database, and updating the staging index. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classISubject}{ISubject}}}
\begin{DoxyCompactItemize}
\item 
virtual \mbox{\hyperlink{classISubject_ae7264a3f132816d45581a1b31845ecac}{\texorpdfstring{$\sim$}{\string~}\+ISubject}} ()=default
\begin{DoxyCompactList}\small\item\em Virtual destructor. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classRepository}{Repository}} $>$ \mbox{\hyperlink{classRepository_acffdc3fb1a22f69018a4037e9b4feabb}{find\+Repository}} (const std\+::string \&start\+\_\+path="{}."{})
\begin{DoxyCompactList}\small\item\em Statically searches for an existing repository starting from a given path and moving up. \end{DoxyCompactList}\item 
static bool \mbox{\hyperlink{classRepository_aed550b2bede1ebe31d4dc4ac42026ba6}{is\+Repository}} (const std\+::string \&path)
\begin{DoxyCompactList}\small\item\em Statically checks if a given path is the root of an SVCS repository. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Additional Inherited Members}
\doxysubsection*{Protected Attributes inherited from \mbox{\hyperlink{classISubject}{ISubject}}}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ \mbox{\hyperlink{classIObserver}{IObserver}} \texorpdfstring{$\ast$}{*} $>$ {\bfseries observers}
\begin{DoxyCompactList}\small\item\em Collection of registered observers. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Manages the version control directory structure and core operations. 

Implements \doxylink{classISubject}{ISubject} to serve as an event publisher for the core VCS operations. 

\label{doc-constructors}
\Hypertarget{classRepository_doc-constructors}
\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classRepository_a64de863b90dcce47cad8389326d5d0f7}\index{Repository@{Repository}!````~Repository@{\texorpdfstring{$\sim$}{\string~}Repository}}
\index{````~Repository@{\texorpdfstring{$\sim$}{\string~}Repository}!Repository@{Repository}}
\doxysubsubsection{\texorpdfstring{\texorpdfstring{$\sim$}{\string~}Repository()}{\string~Repository()}}
{\footnotesize\ttfamily \label{classRepository_a64de863b90dcce47cad8389326d5d0f7} 
Repository\+::\texorpdfstring{$\sim$}{\string~}\+Repository (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}}



Virtual destructor. 

Ensures correct cleanup of managed resources (\doxylink{classObjectStorage}{Object\+Storage}). \Hypertarget{classRepository_a1df4810f68ebca61adfbbad3e079b2f1}\index{Repository@{Repository}!Repository@{Repository}}
\index{Repository@{Repository}!Repository@{Repository}}
\doxysubsubsection{\texorpdfstring{Repository()}{Repository()}}
{\footnotesize\ttfamily \label{classRepository_a1df4810f68ebca61adfbbad3e079b2f1} 
Repository\+::\+Repository (\begin{DoxyParamCaption}\item[{std\+::filesystem\+::path}]{rpath}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



Constructs the repository manager. 


\begin{DoxyParams}{Parameters}
{\em rpath} & The root directory of the repository. \\
\hline
\end{DoxyParams}


\label{doc-func-members}
\Hypertarget{classRepository_doc-func-members}
\doxysubsection{Member Function Documentation}
\Hypertarget{classRepository_a250a9e24514ca3a4f8c6d954ad4dcefc}\index{Repository@{Repository}!attach@{attach}}
\index{attach@{attach}!Repository@{Repository}}
\doxysubsubsection{\texorpdfstring{attach()}{attach()}}
{\footnotesize\ttfamily \label{classRepository_a250a9e24514ca3a4f8c6d954ad4dcefc} 
void Repository\+::attach (\begin{DoxyParamCaption}\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classIObserver}{IObserver}} $>$}]{observer}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Attaches an observer to receive events. 


\begin{DoxyParams}{Parameters}
{\em observer} & Shared pointer to the observer instance. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classISubject_a4f6d20c5e92b9b0a020e8661becf9ace}{ISubject}}.

\Hypertarget{classRepository_a1e421ee99132cf3dcaac6fc54ba0ab7d}\index{Repository@{Repository}!detach@{detach}}
\index{detach@{detach}!Repository@{Repository}}
\doxysubsubsection{\texorpdfstring{detach()}{detach()}}
{\footnotesize\ttfamily \label{classRepository_a1e421ee99132cf3dcaac6fc54ba0ab7d} 
void Repository\+::detach (\begin{DoxyParamCaption}\item[{std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classIObserver}{IObserver}} $>$}]{observer}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Detaches a registered observer. 


\begin{DoxyParams}{Parameters}
{\em observer} & Shared pointer to the observer instance to detach. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classISubject_aad2217012b14bdd6c91eb240689e5a74}{ISubject}}.

\Hypertarget{classRepository_acffdc3fb1a22f69018a4037e9b4feabb}\index{Repository@{Repository}!findRepository@{findRepository}}
\index{findRepository@{findRepository}!Repository@{Repository}}
\doxysubsubsection{\texorpdfstring{findRepository()}{findRepository()}}
{\footnotesize\ttfamily \label{classRepository_acffdc3fb1a22f69018a4037e9b4feabb} 
std\+::shared\+\_\+ptr$<$ \mbox{\hyperlink{classRepository}{Repository}} $>$ Repository\+::find\+Repository (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{start\+\_\+path}{ = {\ttfamily "{}."{}}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Statically searches for an existing repository starting from a given path and moving up. 


\begin{DoxyParams}{Parameters}
{\em start\+\_\+path} & The directory path to begin the search from (defaults to "{}."{}). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A shared pointer to the found \doxylink{classRepository}{Repository} instance, or nullptr if none is found. 
\end{DoxyReturn}
\Hypertarget{classRepository_a9c1153091e3ffa2d5aaf65e900a41c40}\index{Repository@{Repository}!getObjectStorage@{getObjectStorage}}
\index{getObjectStorage@{getObjectStorage}!Repository@{Repository}}
\doxysubsubsection{\texorpdfstring{getObjectStorage()}{getObjectStorage()}}
{\footnotesize\ttfamily \label{classRepository_a9c1153091e3ffa2d5aaf65e900a41c40} 
\mbox{\hyperlink{classObjectStorage}{Object\+Storage}} \texorpdfstring{$\ast$}{*} Repository\+::get\+Object\+Storage (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [nodiscard]}}



Gets the raw pointer to the managed \doxylink{classObjectStorage}{Object\+Storage} instance for database interaction. 

\begin{DoxyReturn}{Returns}
Object\+Storage\texorpdfstring{$\ast$}{*} Pointer to the managed \doxylink{classObjectStorage}{Object\+Storage} instance. 
\end{DoxyReturn}
\Hypertarget{classRepository_a74b5a052c07a886d428e42aaaeebeeb5}\index{Repository@{Repository}!getPath@{getPath}}
\index{getPath@{getPath}!Repository@{Repository}}
\doxysubsubsection{\texorpdfstring{getPath()}{getPath()}}
{\footnotesize\ttfamily \label{classRepository_a74b5a052c07a886d428e42aaaeebeeb5} 
const std\+::filesystem\+::path \& Repository\+::get\+Path (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [nodiscard]}}



Gets the root path of the repository. 

\begin{DoxyReturn}{Returns}
const std\+::filesystem\+::path\& The repository root path. 
\end{DoxyReturn}
\Hypertarget{classRepository_aff14558f8e382efc3e5e53263b85e312}\index{Repository@{Repository}!init@{init}}
\index{init@{init}!Repository@{Repository}}
\doxysubsubsection{\texorpdfstring{init()}{init()}}
{\footnotesize\ttfamily \label{classRepository_aff14558f8e382efc3e5e53263b85e312} 
bool Repository\+::init (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Initializes the basic repository structure (.svcs, objects, refs) on the disk. 

\begin{DoxyReturn}{Returns}
bool True if initialization succeeded, false otherwise. 
\end{DoxyReturn}
\Hypertarget{classRepository_a58a23eff67b9a24c3a8916fd8dfacc9a}\index{Repository@{Repository}!initializeDependencies@{initializeDependencies}}
\index{initializeDependencies@{initializeDependencies}!Repository@{Repository}}
\doxysubsubsection{\texorpdfstring{initializeDependencies()}{initializeDependencies()}}
{\footnotesize\ttfamily \label{classRepository_a58a23eff67b9a24c3a8916fd8dfacc9a} 
void Repository\+::initialize\+Dependencies (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Initializes the repository\textquotesingle{}s internal dependencies. 

This typically involves instantiating and setting up internal components like \doxylink{classObjectStorage}{Object\+Storage}. \Hypertarget{classRepository_ae29372147e4b9dbb7ad3efdd32c1c42e}\index{Repository@{Repository}!is\_initialized@{is\_initialized}}
\index{is\_initialized@{is\_initialized}!Repository@{Repository}}
\doxysubsubsection{\texorpdfstring{is\_initialized()}{is\_initialized()}}
{\footnotesize\ttfamily \label{classRepository_ae29372147e4b9dbb7ad3efdd32c1c42e} 
bool Repository\+::is\+\_\+initialized (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [nodiscard]}}



Checks if the repository structure is fully initialized and valid. 

\begin{DoxyReturn}{Returns}
true if all necessary directories and files exist. 
\end{DoxyReturn}
\Hypertarget{classRepository_aed550b2bede1ebe31d4dc4ac42026ba6}\index{Repository@{Repository}!isRepository@{isRepository}}
\index{isRepository@{isRepository}!Repository@{Repository}}
\doxysubsubsection{\texorpdfstring{isRepository()}{isRepository()}}
{\footnotesize\ttfamily \label{classRepository_aed550b2bede1ebe31d4dc4ac42026ba6} 
bool Repository\+::is\+Repository (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{path}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Statically checks if a given path is the root of an SVCS repository. 


\begin{DoxyParams}{Parameters}
{\em path} & The path to check. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if the path contains the required repository marker files/directories. 
\end{DoxyReturn}
\Hypertarget{classRepository_a7ce8792d0a1493d98986fb2732b95c4c}\index{Repository@{Repository}!notify@{notify}}
\index{notify@{notify}!Repository@{Repository}}
\doxysubsubsection{\texorpdfstring{notify()}{notify()}}
{\footnotesize\ttfamily \label{classRepository_a7ce8792d0a1493d98986fb2732b95c4c} 
void Repository\+::notify (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structEvent}{Event}} \&}]{event}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}



Notifies all attached observers about an event. 


\begin{DoxyParams}{Parameters}
{\em event} & The constant reference to the event data structure. \\
\hline
\end{DoxyParams}


Implements \mbox{\hyperlink{classISubject_aa2da71c9f12ce1097f83bc8887fa0474}{ISubject}}.

\Hypertarget{classRepository_ae75a20286b79919005724ab4dfa80717}\index{Repository@{Repository}!stageFile@{stageFile}}
\index{stageFile@{stageFile}!Repository@{Repository}}
\doxysubsubsection{\texorpdfstring{stageFile()}{stageFile()}}
{\footnotesize\ttfamily \label{classRepository_ae75a20286b79919005724ab4dfa80717} 
bool Repository\+::stage\+File (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{path}{}\end{DoxyParamCaption})}



Stages a file by hashing its content, storing it in the object database, and updating the staging index. 


\begin{DoxyParams}{Parameters}
{\em path} & The path to the file to be staged (relative to the repository root). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool True if the file was successfully staged, false otherwise (e.\+g., file ignored, permission error). 
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em std\+::runtime\+\_\+error} & if file system or object storage operations fail. \\
\hline
\end{DoxyExceptions}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
core/include/\mbox{\hyperlink{Repository_8hxx}{Repository.\+hxx}}\item 
core/src/\mbox{\hyperlink{Repository_8cxx}{Repository.\+cxx}}\end{DoxyCompactItemize}
