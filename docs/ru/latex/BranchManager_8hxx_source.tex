\doxysection{Branch\+Manager.\+hxx}
\hypertarget{BranchManager_8hxx_source}{}\label{BranchManager_8hxx_source}\index{core/include/BranchManager.hxx@{core/include/BranchManager.hxx}}
\mbox{\hyperlink{BranchManager_8hxx}{См. документацию.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ISubject_8hxx}{../../services/ISubject.hxx}}"{}}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ <utility>}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ <unordered\_map>}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00044\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacesvcs_1_1core}{svcs::core}}\ \{}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \textcolor{keyword}{using\ namespace\ }\mbox{\hyperlink{namespacesvcs_1_1services}{svcs::services}};}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00065\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classsvcs_1_1core_1_1BranchManager_a1186561ba3c5062928760c378c1a5127}{BranchManager}}\ \{}
\DoxyCodeLine{00066\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structsvcs_1_1core_1_1BranchManager_1_1Branch_a2282c523dbd4b3f9fac16eb6e42bd112}{Branch}}\ \{}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ std::string\ \mbox{\hyperlink{structsvcs_1_1core_1_1BranchManager_1_1Branch_a9c7476a97e2da3933ac2ef3593dd02c6}{name}};}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ std::string\ \mbox{\hyperlink{structsvcs_1_1core_1_1BranchManager_1_1Branch_a396f878953ae6eb113a6c82e5e5a38ae}{head\_commit}};}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structsvcs_1_1core_1_1BranchManager_1_1Branch_a6514d9c72b57e3050a62d1949423f1fc}{is\_current}};}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structsvcs_1_1core_1_1BranchManager_1_1Branch_a2282c523dbd4b3f9fac16eb6e42bd112}{Branch}}()\ :\ \mbox{\hyperlink{structsvcs_1_1core_1_1BranchManager_1_1Branch_a9c7476a97e2da3933ac2ef3593dd02c6}{name}}(\textcolor{stringliteral}{"{}"{}}),\ \mbox{\hyperlink{structsvcs_1_1core_1_1BranchManager_1_1Branch_a396f878953ae6eb113a6c82e5e5a38ae}{head\_commit}}(\textcolor{stringliteral}{"{}"{}}),\ \mbox{\hyperlink{structsvcs_1_1core_1_1BranchManager_1_1Branch_a6514d9c72b57e3050a62d1949423f1fc}{is\_current}}(\textcolor{keyword}{false})\ \{\}}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{structsvcs_1_1core_1_1BranchManager_1_1Branch_a2282c523dbd4b3f9fac16eb6e42bd112}{Branch}}(std::string\ \ \mbox{\hyperlink{structsvcs_1_1core_1_1BranchManager_1_1Branch_a9c7476a97e2da3933ac2ef3593dd02c6}{name}},\ std::string\ \ \mbox{\hyperlink{structsvcs_1_1core_1_1BranchManager_1_1Branch_a396f878953ae6eb113a6c82e5e5a38ae}{head\_commit}},\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{structsvcs_1_1core_1_1BranchManager_1_1Branch_a6514d9c72b57e3050a62d1949423f1fc}{is\_current}}\ =\ \textcolor{keyword}{false})}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ :\ \mbox{\hyperlink{structsvcs_1_1core_1_1BranchManager_1_1Branch_a9c7476a97e2da3933ac2ef3593dd02c6}{name}}(std::move(\mbox{\hyperlink{structsvcs_1_1core_1_1BranchManager_1_1Branch_a9c7476a97e2da3933ac2ef3593dd02c6}{name}})),\ \mbox{\hyperlink{structsvcs_1_1core_1_1BranchManager_1_1Branch_a396f878953ae6eb113a6c82e5e5a38ae}{head\_commit}}(std::move(\mbox{\hyperlink{structsvcs_1_1core_1_1BranchManager_1_1Branch_a396f878953ae6eb113a6c82e5e5a38ae}{head\_commit}})),\ \mbox{\hyperlink{structsvcs_1_1core_1_1BranchManager_1_1Branch_a6514d9c72b57e3050a62d1949423f1fc}{is\_current}}(\mbox{\hyperlink{structsvcs_1_1core_1_1BranchManager_1_1Branch_a6514d9c72b57e3050a62d1949423f1fc}{is\_current}})\ \{\}}
\DoxyCodeLine{00128\ \ \ \ \ \};}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00139\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classsvcs_1_1core_1_1BranchManager_a1186561ba3c5062928760c378c1a5127}{BranchManager}}(std::shared\_ptr<ISubject>\ event\_bus);}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00148\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classsvcs_1_1core_1_1BranchManager_aaeddc86ed1674cec5035091ce42c8ce0}{createDefaultBranches}}();}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{comment}{//\ -\/-\/-\/\ Public\ Branch\ Operations\ /\ Публичные\ операции\ с\ ветвями\ -\/-\/-\/}}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00163\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsvcs_1_1core_1_1BranchManager_afba858826177a7d35e5bf4ba11d02e4c}{createBranch}}(\textcolor{keyword}{const}\ std::string\&\ name);}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00178\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsvcs_1_1core_1_1BranchManager_a50a1bb26531ea36df819546086a87a64}{createBranchFromCommit}}(\textcolor{keyword}{const}\ std::string\&\ name,\ \textcolor{keyword}{const}\ std::string\&\ commit\_hash);}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00189\ \ \ \ \ std::string\ \mbox{\hyperlink{classsvcs_1_1core_1_1BranchManager_a9af2a2c61016bd084cf11fd315a10a8b}{getHeadCommit}}();}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00206\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsvcs_1_1core_1_1BranchManager_ad4943fef7b9c8da85e8596207164e214}{deleteBranch}}(\textcolor{keyword}{const}\ std::string\&\ name,\ \textcolor{keywordtype}{bool}\ force\ =\ \textcolor{keyword}{false});}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00221\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsvcs_1_1core_1_1BranchManager_a0d998f13423812ffd77f6e89a0e57eac}{renameBranch}}(\textcolor{keyword}{const}\ std::string\&\ old\_name,\ \textcolor{keyword}{const}\ std::string\&\ new\_name);}
\DoxyCodeLine{00222\ }
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsvcs_1_1core_1_1BranchManager_af029c7a1321ef4f577126b140c895096}{switchBranch}}(\textcolor{keyword}{const}\ std::string\&\ name);}
\DoxyCodeLine{00239\ }
\DoxyCodeLine{00240\ \ \ \ \ \textcolor{comment}{//\ -\/-\/-\/\ Public\ Branch\ Queries\ /\ Публичные\ запросы\ о\ ветвях\ -\/-\/-\/}}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00251\ \ \ \ \ std::vector<Branch>\ \mbox{\hyperlink{classsvcs_1_1core_1_1BranchManager_a4bca76c5b5a8fe745d9bf42a72d573b0}{getAllBranches}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00262\ \ \ \ \ std::string\ \mbox{\hyperlink{classsvcs_1_1core_1_1BranchManager_a992318e3f008d2ef1dec308abdaf22a2}{getCurrentBranch}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00263\ }
\DoxyCodeLine{00277\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsvcs_1_1core_1_1BranchManager_afa41aa01cba721676eb21df2c3e6eb48}{updateBranchHead}}(\textcolor{keyword}{const}\ std::string\&\ branch\_name,\ \textcolor{keyword}{const}\ std::string\&\ commit\_hash);}
\DoxyCodeLine{00278\ }
\DoxyCodeLine{00290\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsvcs_1_1core_1_1BranchManager_a8403698a8623b827cdc8f1bbe361ef57}{branchExists}}(\textcolor{keyword}{const}\ std::string\&\ name)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00291\ }
\DoxyCodeLine{00303\ \ \ \ \ std::string\ \mbox{\hyperlink{classsvcs_1_1core_1_1BranchManager_a0929e1f412db5dd9d7cab1f8ecca3648}{getBranchHead}}(\textcolor{keyword}{const}\ std::string\&\ branch\_name)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00304\ }
\DoxyCodeLine{00305\ \ \ \ \ \textcolor{comment}{//\ -\/-\/-\/\ Public\ Utility\ Methods\ /\ Публичные\ служебные\ методы\ -\/-\/-\/}}
\DoxyCodeLine{00306\ }
\DoxyCodeLine{00318\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsvcs_1_1core_1_1BranchManager_a4765b6227f1462e74d7a3055598ee5c7}{isValidBranchName}}(\textcolor{keyword}{const}\ std::string\&\ name);}
\DoxyCodeLine{00319\ }
\DoxyCodeLine{00331\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classsvcs_1_1core_1_1BranchManager_ace8dccd78fca86460699944478012651}{commitExists}}(\textcolor{keyword}{const}\ std::string\&\ commit\_hash);}
\DoxyCodeLine{00332\ }
\DoxyCodeLine{00333\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00334\ \ \ \ \ \textcolor{comment}{//\ -\/-\/-\/\ Private\ Persistence\ Methods\ /\ Приватные\ методы\ сохранения\ состояния\ -\/-\/-\/}}
\DoxyCodeLine{00335\ }
\DoxyCodeLine{00343\ \ \ \ \ \textcolor{keywordtype}{void}\ loadBranches();}
\DoxyCodeLine{00344\ }
\DoxyCodeLine{00352\ \ \ \ \ \textcolor{keywordtype}{void}\ saveBranches();}
\DoxyCodeLine{00353\ }
\DoxyCodeLine{00365\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ saveBranchToFile(\textcolor{keyword}{const}\ std::string\ \&branch\_name,\ \textcolor{keyword}{const}\ std::string\ \&commit\_hash);}
\DoxyCodeLine{00366\ }
\DoxyCodeLine{00376\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ deleteBranchFile(\textcolor{keyword}{const}\ std::string\ \&branch\_name);}
\DoxyCodeLine{00377\ }
\DoxyCodeLine{00385\ \ \ \ \ \textcolor{keywordtype}{void}\ loadCurrentBranch();}
\DoxyCodeLine{00386\ }
\DoxyCodeLine{00396\ \ \ \ \ \textcolor{keywordtype}{bool}\ saveCurrentBranch()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00397\ }
\DoxyCodeLine{00398\ \ \ \ \ \textcolor{comment}{//\ -\/-\/-\/\ Private\ File\ System\ Abstraction\ Methods\ /\ Приватные\ методы\ абстракции\ файловой\ системы\ -\/-\/-\/}}
\DoxyCodeLine{00399\ }
\DoxyCodeLine{00411\ \ \ \ \ \textcolor{keyword}{static}\ std::string\ readFile(\textcolor{keyword}{const}\ std::string\&\ path);}
\DoxyCodeLine{00412\ }
\DoxyCodeLine{00424\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ writeFile(\textcolor{keyword}{const}\ std::string\&\ path,\ \textcolor{keyword}{const}\ std::string\&\ content);}
\DoxyCodeLine{00425\ }
\DoxyCodeLine{00437\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ fileExists(\textcolor{keyword}{const}\ std::string\&\ path);}
\DoxyCodeLine{00438\ }
\DoxyCodeLine{00448\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ createDirectory(\textcolor{keyword}{const}\ std::string\&\ path);}
\DoxyCodeLine{00449\ }
\DoxyCodeLine{00450\ \ \ \ \ \textcolor{comment}{//\ -\/-\/-\/\ Private\ Path\ Generation\ Methods\ /\ Приватные\ методы\ генерации\ путей\ -\/-\/-\/}}
\DoxyCodeLine{00451\ }
\DoxyCodeLine{00461\ \ \ \ \ \textcolor{keyword}{static}\ std::string\ getBranchesFilePath();}
\DoxyCodeLine{00462\ }
\DoxyCodeLine{00472\ \ \ \ \ \textcolor{keyword}{static}\ std::string\ getHeadFilePath();}
\DoxyCodeLine{00473\ }
\DoxyCodeLine{00483\ \ \ \ \ \textcolor{keyword}{static}\ std::string\ getBranchesDirectory();}
\DoxyCodeLine{00484\ }
\DoxyCodeLine{00492\ \ \ \ \ std::unordered\_map<std::string,\ Branch>\ branches;}
\DoxyCodeLine{00493\ }
\DoxyCodeLine{00501\ \ \ \ \ std::string\ current\_branch;}
\DoxyCodeLine{00502\ }
\DoxyCodeLine{00510\ \ \ \ \ std::shared\_ptr<ISubject>\ event\_bus;}
\DoxyCodeLine{00511\ \};}
\DoxyCodeLine{00512\ }
\DoxyCodeLine{00513\ \}}

\end{DoxyCode}
