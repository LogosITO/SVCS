\doxysection{Repository\+Manager.\+hxx}
\hypertarget{RepositoryManager_8hxx_source}{}\label{RepositoryManager_8hxx_source}\index{core/include/RepositoryManager.hxx@{core/include/RepositoryManager.hxx}}
\mbox{\hyperlink{RepositoryManager_8hxx}{См. документацию.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ISubject_8hxx}{../../services/ISubject.hxx}}"{}}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#include\ <optional>}}
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ <filesystem>}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00040\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structCommitInfo}{CommitInfo}}\ \{}
\DoxyCodeLine{00048\ \ \ \ \ std::string\ \mbox{\hyperlink{structCommitInfo_a17b73098845c08e071b05234db336fcd}{hash}};}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00057\ \ \ \ \ std::string\ \mbox{\hyperlink{structCommitInfo_aa9dce2c2bf3c1622d77ef5bbbb63113e}{message}};}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structCommitInfo_a5d011d8d9edd88ef6953f8bc146681b2}{files\_count}}\ =\ 0;}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00075\ \ \ \ \ std::string\ \mbox{\hyperlink{structCommitInfo_ade2668c2ddc4785889792a443f88cc4a}{author}};}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00084\ \ \ \ \ std::string\ \mbox{\hyperlink{structCommitInfo_a058d42cb536a2d4d2ae5fc49fecf9ad7}{timestamp}};}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00093\ \ \ \ \ std::string\ \mbox{\hyperlink{structCommitInfo_a7859b0ad6d68755896ee2d831480622a}{branch}};}
\DoxyCodeLine{00094\ \};}
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00111\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classRepositoryManager}{RepositoryManager}}\ \{}
\DoxyCodeLine{00112\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00120\ \ \ \ \ std::string\ currentRepoPath;}
\DoxyCodeLine{00121\ }
\DoxyCodeLine{00129\ \ \ \ \ std::shared\_ptr<ISubject>\ eventBus;}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{comment}{//\ -\/-\/-\/\ Private\ Utility\ Methods\ for\ Logging\ /\ Приватные\ служебные\ методы\ для\ логирования\ -\/-\/-\/}}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00142\ \ \ \ \ \textcolor{keywordtype}{void}\ logError(\textcolor{keyword}{const}\ std::string\&\ message)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00153\ \ \ \ \ \textcolor{keywordtype}{void}\ logDebug(\textcolor{keyword}{const}\ std::string\&\ message)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00154\ }
\DoxyCodeLine{00164\ \ \ \ \ \textcolor{keywordtype}{void}\ logInfo(\textcolor{keyword}{const}\ std::string\&\ message)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \ \ \textcolor{comment}{//\ -\/-\/-\/\ Private\ Utility\ Methods\ for\ File\ System\ Operations\ /\ Приватные\ служебные\ методы\ для\ операций\ с\ файловой\ системой\ -\/-\/-\/}}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00179\ \ \ \ \ \textcolor{keywordtype}{bool}\ createDirectory(\textcolor{keyword}{const}\ std::filesystem::path\&\ path)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00194\ \ \ \ \ \textcolor{keywordtype}{bool}\ createFile(\textcolor{keyword}{const}\ std::filesystem::path\&\ path,\ \textcolor{keyword}{const}\ std::string\&\ content\ =\ \textcolor{stringliteral}{"{}"{}})\ \textcolor{keyword}{const};}
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00205\ \ \ \ \ std::string\ getCurrentBranchFromHead()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00206\ }
\DoxyCodeLine{00207\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00217\ \ \ \ \ \textcolor{keyword}{explicit}\ \mbox{\hyperlink{classRepositoryManager_a458ddacf912fdc1774ab351f736a19cf}{RepositoryManager}}(std::shared\_ptr<ISubject>\ bus);}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00228\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classRepositoryManager_a65eba6d28cbf99fd3fbad48845a2cd34}{updateHead}}(\textcolor{keyword}{const}\ std::string\&\ commit\_hash)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00245\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classRepositoryManager_a1ddddb02e8b5f59b06b8a40465716103}{initializeRepository}}(\textcolor{keyword}{const}\ std::string\&\ path,\ \textcolor{keywordtype}{bool}\ force\ =\ \textcolor{keyword}{false});}
\DoxyCodeLine{00246\ }
\DoxyCodeLine{00258\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classRepositoryManager_ae03ccf6c40689d204f8579b6ac860674}{isRepositoryInitialized}}(\textcolor{keyword}{const}\ std::string\&\ path\ =\ \textcolor{stringliteral}{"{}."{}});}
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00271\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classRepositoryManager_a887e56ac86447c2735597e2ea88c33bb}{updateBranchReference}}(\textcolor{keyword}{const}\ std::string\&\ branchName,\ \textcolor{keyword}{const}\ std::string\&\ commitHash)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00272\ }
\DoxyCodeLine{00282\ \ \ \ \ [[nodiscard]]\ std::filesystem::path\ \mbox{\hyperlink{classRepositoryManager_a9e2cecca02ba6ac2638d31ec11d4bc62}{getRepositoryPath}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00283\ }
\DoxyCodeLine{00284\ \ \ \ \ \textcolor{comment}{//\ -\/-\/-\/\ Staging\ and\ History\ Management\ Methods\ /\ Методы\ управления\ подготовкой\ и\ историей\ -\/-\/-\/}}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00299\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classRepositoryManager_aa4a9d5d690cc49d33ad5372fed9b6a54}{addFileToStaging}}(\textcolor{keyword}{const}\ std::string\&\ filePath);}
\DoxyCodeLine{00300\ }
\DoxyCodeLine{00310\ \ \ \ \ std::string\ \mbox{\hyperlink{classRepositoryManager_a063b8ddcbc8a9ffc840df4de77fd9bac}{getHeadCommit}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00323\ \ \ \ \ std::string\ \mbox{\hyperlink{classRepositoryManager_a8e4a9346964bfdff6d44304bca90e2d3}{createCommit}}(\textcolor{keyword}{const}\ std::string\&\ message);}
\DoxyCodeLine{00324\ }
\DoxyCodeLine{00336\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classRepositoryManager_a7b5d52f3d9d35ee3b19e3de95381b97f}{updateCommitReferences}}(\textcolor{keyword}{const}\ std::string\&\ removedCommitHash,\ \textcolor{keyword}{const}\ std::string\&\ newParentHash)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00337\ }
\DoxyCodeLine{00351\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classRepositoryManager_abf991881ef84930dd6e81667360ebdef}{revertCommit}}(\textcolor{keyword}{const}\ std::string\&\ commit\_hash);}
\DoxyCodeLine{00352\ }
\DoxyCodeLine{00364\ \ \ \ \ std::optional<CommitInfo>\ \mbox{\hyperlink{classRepositoryManager_ab6f60e5f4072590eebf0ea6e9de6dcbe}{getCommitByHash}}(\textcolor{keyword}{const}\ std::string\&\ commit\_hash)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00365\ }
\DoxyCodeLine{00377\ \ \ \ \ std::string\ \mbox{\hyperlink{classRepositoryManager_a68c480cfc28657b5027566f3500b6e23}{getParentCommitHash}}(\textcolor{keyword}{const}\ std::string\&\ commit\_hash)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00378\ }
\DoxyCodeLine{00390\ \ \ \ \ \textcolor{keyword}{static}\ std::string\ \mbox{\hyperlink{classRepositoryManager_aa8cc4f01a4d6167153c9974360053bdb}{generateCommitHash}}(\textcolor{keyword}{const}\ std::string\&\ content);}
\DoxyCodeLine{00391\ }
\DoxyCodeLine{00403\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classRepositoryManager_aefb1b537b9c90d9fd0eac7255d5580fd}{restoreFilesFromCommit}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{structCommitInfo}{CommitInfo}}\&\ commit)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00404\ }
\DoxyCodeLine{00414\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classRepositoryManager_a1af28901603c2e70dce49af751105bef}{clearStagingArea}}();}
\DoxyCodeLine{00415\ }
\DoxyCodeLine{00427\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classRepositoryManager_a647383203955484c1b57222ce5e5faf8}{saveStagedChanges}}(\textcolor{keyword}{const}\ std::string\&\ message);}
\DoxyCodeLine{00428\ }
\DoxyCodeLine{00438\ \ \ \ \ std::vector<std::string>\ \mbox{\hyperlink{classRepositoryManager_a5e0b90c8ec4bb9890ccd1672b99b0712}{getStagedFiles}}();}
\DoxyCodeLine{00439\ }
\DoxyCodeLine{00449\ \ \ \ \ std::vector<CommitInfo>\ \mbox{\hyperlink{classRepositoryManager_a3e1c8b2b9f7686ec651c4f205c576cc5}{getCommitHistory}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00450\ }
\DoxyCodeLine{00462\ \ \ \ \ std::vector<CommitInfo>\ \mbox{\hyperlink{classRepositoryManager_a88ca62ed585f39a3690447d1c6f029de}{getBranchHistory}}(\textcolor{keyword}{const}\ std::string\&\ branch\_name)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00463\ }
\DoxyCodeLine{00473\ \ \ \ \ std::string\ \mbox{\hyperlink{classRepositoryManager_a349a454c83ccbd63eb9b5a7c12b6a2ef}{getCurrentBranch}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00474\ }
\DoxyCodeLine{00486\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classRepositoryManager_a411879a02a3df9de01aceb9d36ae30ff}{removeRepository}}(\textcolor{keyword}{const}\ std::filesystem::path\&\ path)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00487\ }
\DoxyCodeLine{00499\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classRepositoryManager_ad3b43df94ac6ede014b7e9874cc78b0b}{branchExists}}(\textcolor{keyword}{const}\ std::string\&\ branch\_name)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00500\ }
\DoxyCodeLine{00512\ \ \ \ \ std::string\ \mbox{\hyperlink{classRepositoryManager_a2b1e565145033e923fd3881734939b0a}{getBranchHead}}(\textcolor{keyword}{const}\ std::string\&\ branch\_name)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00513\ }
\DoxyCodeLine{00527\ \ \ \ \ std::string\ \mbox{\hyperlink{classRepositoryManager_a06c251dbfab7dd09ebe42dcd2585416d}{getFileContentAtCommit}}(\textcolor{keyword}{const}\ std::string\&\ commit\_hash,\ \textcolor{keyword}{const}\ std::string\&\ file\_path)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00528\ }
\DoxyCodeLine{00540\ \ \ \ \ std::vector<std::string>\ \mbox{\hyperlink{classRepositoryManager_a8c70604640f7649809496ff5f3140678}{getCommitFiles}}(\textcolor{keyword}{const}\ std::string\&\ commit\_hash)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00541\ }
\DoxyCodeLine{00553\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classRepositoryManager_ae1acfdc55c7763a4bb763239dafe510e}{setMergeState}}(\textcolor{keyword}{const}\ std::string\&\ branch\_name,\ \textcolor{keyword}{const}\ std::string\&\ commit\_hash)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00554\ }
\DoxyCodeLine{00562\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classRepositoryManager_a4aec01d8ae4d1e92557d59d82edf37c8}{clearMergeState}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00563\ }
\DoxyCodeLine{00573\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classRepositoryManager_abde5809b74cc06049e784ca08c293c01}{isMergeInProgress}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00574\ }
\DoxyCodeLine{00584\ \ \ \ \ std::string\ \mbox{\hyperlink{classRepositoryManager_a597e22a9a35f0f8175a12b5e0bb651da}{getMergeBranch}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00585\ \};}

\end{DoxyCode}
